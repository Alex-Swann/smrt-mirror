

<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Snap Grid</title>
    <link rel="stylesheet" href="css/style.css">
    <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:400,300,700' rel='stylesheet' type='text/css'>
    <style>
    .draggable { width: 90px; height: 80px; padding: 5px; float: left; margin: 0 10px 10px 0; font-size: .9em; }
    .ui-widget-header p, .ui-widget-content p { margin: 0; }
    #snaptarget { height: 140px; }
    </style>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
    <script>
    $( function() {
      $( "#draggable" ).draggable({ snap: ".grid-box", snapMode: "inner", snapTolerance: 103, cursor: "pointer" });
    } );
    </script>
    <title>DOM Visualizer - Leap</title>


  </head>
  <body>

    <div id="main-wrapper">

      <h1><span style="font-weight: normal">smrt</span><span style="">mirror</span> - dashboard</h1>

      <div id="grid-container">
        <div class="grid-box"></div>
        <div class="grid-box"></div>
        <div class="grid-box"></div>
        <div class="grid-box"></div>
        <div class="grid-box"></div>
        <div class="grid-box"></div>
        <div class="grid-box"></div>
        <div class="grid-box"></div>
        <div class="grid-box"></div>
      </div>

      <div id="widget-list-container">
        <div id="draggable" class="widget-box"></div>
      </div>

    </div>

    <script>
      window.onload = function() {


        $("#draggable").mouseup(function(){
          var origin = $("#grid-container").position();
          var location = $(this).position();
          var locationKey = "loc"+(location.top-origin.top)+(location.left-origin.left);
          console.log(this);
          jsonData = {
            name: "test",
            location: gridPosition[locationKey]
          }

          console.log(jsonData);

          $.ajax({
            url: "/api/widgets",
            dataType: 'json',
            type: 'POST',
            data: jsonData,
            success: function(data) {
              console.log("success");
            }.bind(this),
            error: function(xhr, status, err) {
              console.log(err.toString());
            }.bind(this)
          });
        });

        var gridPosition = {
          loc00: 1,
          loc0205: 2,
          loc0410: 3,
          loc2050: 4,
          loc205205: 5,
          loc205410: 6,
          loc4100: 7,
          loc410205: 8,
          loc410410: 9
        }
      };
    </script>
    Hey
    <button type="submit" onClick="leap()"></button>

    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
    <!-- <script src="https://js.leapmotion.com/leap-0.6.4.js"></script>
    <script src="https://js.leapmotion.com/leap-plugins-0.1.11.js"></script> -->

    <script src="scripts/leap.min.js"></script>
    <script src="scripts/leaptrainer.min.js"></script>
    <script src="scripts/three.min.js"></script>
    <script src="scripts/detector.min.js"></script>
    <script src="scripts/leapcursor.js"></script>

    <script src="scripts/task.js"></script>

    <script type="text/javascript">
    $(document).ready(function() {
      var trainer = new LeapTrainer.Controller()

      trainer.fromJSON('{"name":"GRAB-DROP","pose":false,"data":[[{"x":-0.17129746486142844,"y":0.20850686694827025,"z":0.26352651067565325,"stroke":1},{"x":0.2514635680097548,"y":-0.07141509843321195,"z":0.0005162219792316791,"stroke":1},{"x":-0.20079467940446072,"y":-0.0002198518081845957,"z":0.12472285425920493,"stroke":1},{"x":0.2599197251505281,"y":-0.09708537603885103,"z":0.09098810100264959,"stroke":1},{"x":0.010281231605264285,"y":-0.04266437398002079,"z":-0.0830318536126246,"stroke":1},{"x":0.1081176668194066,"y":-0.03328635078151887,"z":0.18130840111641056,"stroke":1},{"x":0.25152391007616004,"y":-0.06345410467900704,"z":-0.09026277260274757,"stroke":1},{"x":-0.2520083778306569,"y":-0.046578544257822485,"z":-0.052570633663521715,"stroke":1},{"x":-0.03499314982559487,"y":0.03748151418628967,"z":0.22290442377238062,"stroke":1},{"x":0.38582562250379093,"y":-0.18194014898516503,"z":0.030023629633210647,"stroke":1},{"x":-0.010738222477246095,"y":0.06735647530929711,"z":-0.24830037801192056,"stroke":1},{"x":-0.37441554556553325,"y":0.029191637152475303,"z":-0.03107355775003462,"stroke":1},{"x":0.10749775203426426,"y":-0.04548517977509636,"z":0.19143473825776958,"stroke":1},{"x":0.3474081745975103,"y":-0.07617345164423028,"z":-0.05776903149116258,"stroke":1},{"x":-0.0636158333355511,"y":0.17527288828235277,"z":-0.3456698476951835,"stroke":1},{"x":-0.6141743774962091,"y":0.14049309850442365,"z":-0.19674680586931426,"stroke":1}]]}');

      // trainer.on('GRAB-DROP', function() { alert('Grab!!'); });
  
    })

    </script>

  </body>
</html>
